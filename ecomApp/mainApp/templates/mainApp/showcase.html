{% extends 'mainApp/layout.html' %}

{% block content %}
{% load custom_filters %}
{% load static %}

<div class="container">
    <div class="row mt-3">
        <div class="col-lg-6">
            <h1 class="text-center">{{graphic.title}}</h1>
            <img src="{% get_media_prefix %}{{graphic.media}}" class="img-fluid element2" alt="..." style="max-height: 450px;">
            <div class="review form-control mt-5 p-3">
                <div class="row">
                    <form action="{% url 'give_review' %}" method="get">
                        <input type="radio" name="review" value="1" id="rate1"> <label for="rate1">Rate 1</label>
                        <input type="radio" name="review" value="2" id="rate2"> <label for="rate2">Rate 2</label>
                        <input type="radio" name="review" value="3" id="rate3"> <label for="rate3">Rate 3</label>
                        <input type="radio" name="review" value="4" id="rate4"> <label for="rate4">Rate 4</label>
                        <input type="radio" name="review" value="5" id="rate5"> <label for="rate5">Rate 5</label>
                        <input type="hidden" name="graphic_id" value="{{graphic.id}}">
                        <input type="submit" class="btn btn-primary col-sm-12">
                    </form>
                </div>
            </div>
        </div>
        <div class="col-lg-5 pt-5" style="margin-bottom: 20px;padding-left: 30px;  border-left: 1px lightgray solid;">
            <h4 class=""text-center>{{graphic.title}}</h4>
            {% if graphic.discount <= 0 %}
                {% if graphic.cost <= 0 %}
                    <h5> Free </h5>
                {% else %}
                    <h5>${{graphic.cost}}</h5>
                {% endif %}
    
            {% else %}
                {% if graphic.cost <= 0 %}
                <h5> Free </h5>
                {% else %}
                <h5>
                    <strike class="text-secondary">${{ graphic.cost }}</strike>
                    ${{graphic.cost|discount:graphic.discount}}
                </h5>
                {% endif %}
            {% endif %}
    
            <a href="{% url 'index' %}?q={{graphic.tag}}" class="text-secondary" style="text-decoration: none;">
                <i class="bi bi-tags"></i>
                {{graphic.tag}}
            </a><br>
            <p class="text-secondary mt-3" style="text-align: justify;">{{graphic.discription}}</p>
            {% csrf_token %}
            <form action="{% url 'add_to_cart' %}" method = "post">
                {% csrf_token %}
                <label for="add_on" style="font-weight: bold; font-size: 25px;">Add on message</label>
                <p class="text-secondary">This the reminding message which will be provided as a text file when you donwload the graphic.</p>
                <textarea name="add_on" id="add_on" cols="30" rows="7" class="form-control"></textarea>
                <label for="quantity" style="font-weight: bold; font-size: 25px;">Quantity</label>
                <input type="number" id="quantity" name="quantity" value="1" class="form-control" required onchange = "validateQuantity(this);">
                <input type="number" id="graphic_id" name="graphic_id" hidden required value={{graphic.id}}>
                <div class="text-end">
                    <a href="{% url 'index' %}" class="btn btn-secondary mt-3">Continue Shopping</a>
                    <input type="submit" class="btn btn-success mt-3" value="Add to cart">
                </div>
            </form>
        </div> 
    </div>
</div>

<script>
    function validateQuantity(el){
        val = parseInt(el.value);
        if (val < 1){
            el.value = 1
        }
    }
</script>

{% endblock %}